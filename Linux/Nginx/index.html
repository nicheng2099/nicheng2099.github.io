<!DOCTYPE html>

<html lang="zh-CN"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
    
    
    <title>1.安装nginx - DOC</title>
    
    <script type="text/javascript">js_vars = {}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": null, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/">
                
                    <img class="site_logo" src="/static/image/logo2.png" alt="/">
                
                
                    <h2>笔记</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/Odoo/">Odoo</a></li>
<li class=""><a  href="/doc2/">大数据</a></li>
<li class="active"><a  href="/Linux/">Linux</a></li>
<li class=""><a  href="/Python/">Python</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a  href="/Link/">收藏的链接</a></li>
</ul>

                <ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">搜索</span>
                            <div id="search_hints">
                                <span id="search_input_hint">输入关键词，多关键词空格隔开</span>
                                <span id="search_loading_hint">正在加载，请稍候。。。</span>
                                <span id="search_download_err_hint">下载文件失败，请刷新重试或检查网络</span>
                                <span id="search_other_docs_result_hint">来自其它文档的结果</span>
                                <span id="search_curr_doc_result_hint">当前文档搜索结果</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/Linux/index.html"><span class="label">linux学习</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Linux/linux mysql 操作命令.html"><span class="label">linux mysql 操作命令</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Linux/CentOS 7 yum安装 MySQL 5.7.html"><span class="label">CentOS 7 yum安装 MySQL 5.7</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Linux/在Ubuntu上安装PostgreSQL 13.html"><span class="label">在Ubuntu上安装PostgreSQL 13</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Linux/lvs.html"><span class="label">lvs</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Linux/lvs实操.html"><span class="label">lvs实操</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Linux/克隆模板机.html"><span class="label">克隆模板机</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Linux/NFS网络文件.html"><span class="label">NFS网络文件</span><span class=""></span></a></li>
<li class="active_parent no_link"><a><span class="label">Nginx</span><span class="sub_indicator"></span></a><ul class="show">
<li class="active with_link"><a href="/Linux/Nginx/index.html"><span class="label">Nginx安装部署</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Docker</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/Linux/Docker/index.html"><span class="label">Docker安装</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/Linux/Docker/Docker部署Nginx.html"><span class="label">Docker部署Nginx(简单案例)</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Grafana</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/Linux/Grafana/在Ubuntu上部署Grafana.html"><span class="label">在Ubuntu上部署Grafana</span><span class=""></span></a></li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>1.安装nginx</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="最后修改日期： 2025-11-11">
                                    2025-11-11
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <p>在实验一的基础上，在/opt目录下创建src目录，并进入该目录，用于存放安装包</p>

<pre class="language-linux"><code class="language-linux">cd /opt
mkdir src
cd src
</code></pre>
<p>在src目录下安装nginx安装包</p>

<pre class="language-linux"><code class="language-linux">wget https://nginx.org/download/nginx-1.22.1.tar.gz
</code></pre>
<p>用ls指令查看nginx.gz压缩包，并用tar命令解压，解压完成后进入nginx文件</p>

<pre class="language-linux"><code class="language-linux">tar -zxvf nginx-1.22.1.tar.gz
cd nginx-1.22.1
</code></pre>
<p>ls指令查看该文件内容</p>
<p><img src="image/1.jpg" alt="" /></p>
<p>执行configure文件，之后再执行make install</p>

<pre class="language-none"><code class="language-none">./configure --prefix=/opt/nginx
make install
</code></pre>
<p>在此过程中如果缺少相关文件报错，执行以下代码，再重复上一步操作</p>

<pre class="language-none"><code class="language-none">yum install -y zlib-devel.x86_64 pcre2-devel.x86_64  #centOS
apt install -y zlib1g-dev libpcre2-dev #ubantu
</code></pre>
<p>进入/opt/nginx，查看该目录下内容</p>
<p><img src="image/2.jpg" alt="" /></p>
<p>进入conf查看配置文件nginx.conf,默认80端口打开</p>

<pre class="language-none"><code class="language-none">server {
        listen       80;
        server_name  localhost;

        location / {
            root   html;
            index  index.html index.htm;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }
</code></pre>
<p>输入以下代码，将防火墙打开</p>

<pre class="language-none"><code class="language-none">firewall-cmd --zone=public --add-port=80/tcp --permanent
systemctl restart firewalld.service
</code></pre>
<p>在网页中输入ip地址，通过80端口访问，如：192.168.101.100:80</p>
<p><img src="image/3.jpg" alt="" /></p>
<p>进入nginx目录下的html目录，编辑其中默认index界面</p>

<pre class="language-none"><code class="language-none">cd /opt/nginx/html

vim index.html
</code></pre>
<p><img src="image/14.jpg" alt="" /></p>
<p>添加以下内容，并保存</p>

<pre class="language-none"><code class="language-none">&lt;p&gt;我是软件202班李超同学&lt;/p&gt;
</code></pre>
<p><img src="image/15.jpg" alt="" /></p>
<p>再次在网页中输入ip地址，通过80端口访问，如：192.168.101.100:80，发现中文部分乱码</p>
<p><img src="image/17.jpg" alt="" /></p>
<p>重新编辑index.html文件在<head></head>中加入网页的编码类型，如utf-8</p>

<pre class="language-none"><code class="language-none">&lt;meta charset=&quot;UTF-8&quot;&gt;
</code></pre>
<p><img src="image/18.jpg" alt="" /></p>
<p>重新访问地址，发现内容正常输出</p>
<p><img src="image/16.jpg" alt="" /></p>
<h1 id="2.%E9%85%8D%E7%BD%AEjdk">2.配置jdk</h1>
<p>在/opt/src中下载jdk包</p>

<pre class="language-linux"><code class="language-linux">wget https://download.java.net/java/GA/jdk19.0.1/afdd2e245b014143b62ccb916125e3ce/10/GPL/openjdk-19.0.1_linux-x64_bin.tar.gz
</code></pre>
<p>解压到/usr/local/目录下，并编辑/etc/profile，添加以下内容到末尾，结束后使用source点命令，重新执行刚修改的初始化文件，使之立即生效，再输入java -version查看jdk版本来确定是否配置成功</p>

<pre class="language-none"><code class="language-none">tar -C /usr/local/ -zxvf openjdk-19.0.1_linux-x64_bin.tar.gz

vim /etc/profile

export JAVA_HOME=/usr/local/jdk-19.0.1
export PATH=$JAVA_HOME/bin:$PATH
export CLASSPATH=$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar

source /etc/profile
java -version
</code></pre>
<p><img src="image/23.jpg" alt="" /></p>
<h1 id="3.%E5%88%9B%E5%BB%BAspringboot%E5%B7%A5%E7%A8%8B">3.创建springboot工程</h1>
<p>使用idea创建一个Springboot项目</p>
<p><img src="image/4.jpg" alt="" /></p>
<p>选择Spring Web</p>
<p><img src="image/5.jpg" alt="" /></p>
<p>创建controllerbao包，并创建TextControllerlei类，编写以下方法</p>
<p><img src="image/6.jpg" alt="" /></p>
<p>用浏览器访问localhost:8080/hello</p>
<p><img src="image/7.jpg" alt="" /></p>
<p>打包</p>
<p><img src="image/8.jpg" alt="" /></p>
<p>找到项目jar包</p>
<p><img src="image/9.jpg" alt="" /></p>
<p>重复上述方法，再创建一个Springboot项目，将TextControllerlei类中hello方法返回值改成以下内容，并打包</p>
<p><img src="image/19.jpg" alt="" /></p>
<p>在/opt目录下创建app目录，并将jar包通过Xftp放入其中</p>

<pre class="language-none"><code class="language-none">cd /opt
mkdir app
cd app
</code></pre>
<p><img src="image/10.jpg" alt="" /></p>
<p>输入以下代码将java项目在后台执行，并重定向输入到Log_demo8080.log文件中</p>

<pre class="language-none"><code class="language-none">#负载均衡时通过8080和8081同时启动，运用权重来分配访问的频率
nohup java -jar lichao-0.0.1-SNAPSHOT.jar &gt; Log_demo8080.log 2&gt;&amp;1 &amp; 
nohup java -jar lichao1-0.0.1-SNAPSHOT.jar --server.port=8081 &gt; Log_demo8081.log 2&gt;&amp;1 &amp; 

ps aux | grep java

curl http://localhost:8080/hello
curl http://localhost:8081/hello
</code></pre>
<p><img src="image/11.jpg" alt="" /></p>
<p><img src="image/20.jpg" alt="" /></p>
<h1 id="4.%E9%85%8D%E7%BD%AE%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">4.配置负载均衡</h1>
<p>回到/opt/nginx/conf/目录下，vim编辑nginx.conf文件</p>

<pre class="language-none"><code class="language-none">cd /opt/nginx/conf/

vim nginx.conf
</code></pre>
<p>在nginx.conf中添加一个上游服务器，在这里配置负载均衡</p>

<pre class="language-none"><code class="language-none">upstream lichao
    { 
        server 127.0.0.1:8080 weight=1;
        server 127.0.0.1:8081 weight=1;
    }
</code></pre>
<p>在nginx.conf中location将内容注释掉，并反向代理到负载均衡</p>

<pre class="language-none"><code class="language-none">location / {
            #root   html;
            #index  index.html index.htm;
            proxy_pass http://lichao;
        }
</code></pre>
<p>修改后重新加载一下配置文件</p>

<pre class="language-none"><code class="language-none">../sbin/nginx -t
../sbin/nginx -s reload
#如果报错：nginx: [error] invalid PID number &quot;&quot; in &quot;/opt/nginx/logs/nginx.pid&quot;
#执行以下指令
/opt/nginx/sbin/nginx -c /opt/nginx/conf/nginx.conf
</code></pre>
<p>再次访问ip地址</p>
<p><img src="image/12.jpg" alt="" /></p>
<p>加入/hello后缀</p>
<p><img src="image/13.jpg" alt="" /></p>
<p>尝试不断刷新网页，可以发现内容中application1和application2在不断切换，确定能正确交替返回上述两个tomcat的内容</p>
<p><img src="image/21.jpg" alt="" /></p>
<p>通过curl命令访问<a href="http://localhost/hello"  target="_blank">http://localhost/hello</a>，确认能正确交替返回上述两个tomcat的内容。</p>
<p><img src="image/22.jpg" alt="" /></p>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/Linux/NFS网络文件.html">
                            <span class="icon"></span>
                            <span class="label">NFS网络文件</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/Linux/Docker/index.html">
                            <span class="label">Docker安装</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a></a><ul><li><a target="_blank" href="/#"></a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://gitee.com/LC_Link">技术支持 | LC_Link</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/css/theme_default/prism.min.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
</body>

</html>